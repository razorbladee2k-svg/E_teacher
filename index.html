<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>eTeacher â€“ Learn English with us</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#1f4fd8;
  --card:#ffffff;
  --text:#111;
  --btn:#5a55ea;
}
.dark{
  --bg:#0b1020;
  --card:#121a2f;
  --text:#fff;
  --btn:#6c7cff;
}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{
  margin:0;
  background:linear-gradient(180deg,var(--bg),#123);
  min-height:100vh;
  color:var(--text);
}
header{
  padding:20px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  color:#fff;
}
header h1{margin:0}
header button{
  margin-left:10px;
  padding:10px 18px;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
.main{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:80vh;
}
.card{
  background:var(--card);
  padding:30px;
  border-radius:18px;
  width:95%;
  max-width:420px;
  box-shadow:0 30px 60px rgba(0,0,0,.35);
  text-align:center;
}
button{
  width:100%;
  padding:14px;
  margin:8px 0;
  border-radius:12px;
  border:none;
  background:var(--btn);
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
button.outline{
  background:none;
  border:2px solid var(--btn);
  color:var(--btn);
}
button.red{background:#d72626}
input,textarea{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:10px;
  border:1px solid #ccc;
}
.hidden{display:none}
.small{font-size:14px;opacity:.7}
.rule{
  background:#f1f3ff;
  padding:12px;
  border-radius:10px;
  margin:10px 0;
}
.dark .rule{background:#1c2440}
.progress{height:6px;background:#ccc;border-radius:4px;overflow:hidden}
.progress div{height:100%;width:0;background:var(--btn)}
</style>
</head>

<body>
<header>
  <h1>eTeacher</h1>
  <div>
    <button onclick="toggleDark()">ðŸŒ™</button>
    <button onclick="show('login')">Login</button>
    <button onclick="show('signup')">Sign Up</button>
  </div>
</header>

<div class="main">

<!-- LOGIN -->
<div class="card hidden" id="login">
<h2>Login</h2>
<input id="loginUser" placeholder="Username">
<input id="loginPass" type="password" placeholder="Password">
<button onclick="login()">Continue</button>
<button class="outline" onclick="show('home')">Back</button>
</div>

<!-- SIGNUP -->
<div class="card hidden" id="signup">
<h2>Sign Up</h2>
<input id="signUser" placeholder="Username">
<input id="signPass" type="password" placeholder="Password">
<button onclick="signup()">Create account</button>
<button class="outline" onclick="show('home')">Back</button>
</div>

<!-- HOME -->
<div class="card" id="home">
<h2>Learn English with us</h2>
<p class="small">Grammar â€¢ Practice â€¢ Writing</p>
<button onclick="show('ready')">What is my level?</button>
<button onclick="show('chooseLevel')">Choose my level</button>
</div>

<!-- READY -->
<div class="card hidden" id="ready">
<h2>Ready for a test?</h2>
<p class="small">This short test checks your level</p>
<button onclick="startTest()">Start test</button>
<button class="outline" onclick="show('home')">Back</button>
</div>

<!-- TEST -->
<div class="card hidden" id="test">
<div class="progress"><div id="bar"></div></div>
<p id="q"></p>
<button onclick="answer(true)">Correct</button>
<button onclick="answer(false)">Incorrect</button>
</div>

<!-- CHOOSE LEVEL -->
<div class="card hidden" id="chooseLevel">
<h2>Choose your level</h2>
<button onclick="setLevel('A2')">A2</button>
<button onclick="setLevel('B1')">B1</button>
<button onclick="setLevel('B2')">B2</button>
<button class="outline" onclick="show('home')">Back</button>
</div>

<!-- DASHBOARD -->
<div class="card hidden" id="dash">
<h2 id="welcome"></h2>
<button onclick="openGrammar()">Grammar</button>
<button onclick="openPractice()">Practice</button>
<button onclick="openEssay()">Essay</button>
<button class="outline" onclick="window.open('https://www.youtube.com/@4000EssentialEnglishWords','_blank')">ðŸ“º Need vocabulary?</button>
<button class="red" onclick="logout()">Logout</button>
</div>

<!-- GRAMMAR -->
<div class="card hidden" id="grammar"></div>

<!-- PRACTICE -->
<div class="card hidden" id="practice">
<p id="practiceQ"></p>
<input id="practiceInput">
<button onclick="checkPractice()">Check</button>
<button class="outline" onclick="openPractice()">Next</button>
<button class="outline" onclick="show('dash')">Back</button>
</div>

<!-- ESSAY -->
<div class="card hidden" id="essay">
<h3 id="essayTitle"></h3>
<textarea id="essayText" rows="6" placeholder="Write your essay..."></textarea>
<p class="small" id="count">0 / 180</p>
<button onclick="checkEssay()">Send</button>
<button class="outline" onclick="show('dash')">Back</button>
<p id="essayFeedback"></p>
</div>

</div>

<script>
let user=null,level="B1",score=0,step=0;
const questions=[
"Do you use conditionals?",
"Can you use present perfect?",
"Do you understand passive voice?"
];

function show(id){
document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
document.getElementById(id).classList.remove('hidden');
}

function signup(){
localStorage.setItem(signUser.value,signPass.value);
alert("Account created");
show('login');
}

function login(){
if(localStorage.getItem(loginUser.value)===loginPass.value){
user=loginUser.value;
show('home');
}else alert("Wrong login");
}

function logout(){user=null;show('home');}

function startTest(){
score=0;step=0;show('test');nextQ();
}

function nextQ(){
if(step>=questions.length){
level=score>=2?"B2":score===1?"B1":"A2";
setLevel(level);return;
}
q.innerText=questions[step];
bar.style.width=((step/questions.length)*100)+"%";
}

function answer(ok){if(ok)score++;step++;nextQ();}

function setLevel(l){
level=l;
welcome.innerText=`Welcome ${user||"Guest"} (${level})`;
show('dash');
}

function openGrammar(){
const g={
A2:`<h3>Present Simple</h3>
<div class="rule">Subject + Verb + Object</div>
I eat apples.<br>She likes music.`,
B1:`<h3>Present Perfect</h3>
<div class="rule">Subject + have/has + Past Participle + Object</div>
I have finished my homework.`,
B2:`<h3>Second Conditional</h3>
<div class="rule">If + Past Simple, would + Verb</div>
If I were rich, I would travel.`
};
grammar.innerHTML=g[level]+'<button onclick="show(\'dash\')">Back</button>';
show('grammar');
}

const practices={
A2:["I ___ apples.","eat"],
B1:["I have ___ my work.","finished"],
B2:["If I ___ rich...","were"]
};

function openPractice(){
practiceQ.innerText=practices[level][0];
practiceInput.value="";
show('practice');
}

function checkPractice(){
alert(practiceInput.value.toLowerCase()===practices[level][1]?"Correct":"Wrong. Answer: "+practices[level][1]);
}

const titles=[
"Is technology good for students?",
"Should school be online?",
"Benefits of learning English"
];

function openEssay(){
essayTitle.innerText=titles[Math.floor(Math.random()*titles.length)];
essayText.value="";
essayFeedback.innerText="";
count.innerText="0 / 180";
show('essay');
}

essayText.oninput=()=>count.innerText=essayText.value.split(" ").length+" / 180";

function checkEssay(){
let text=essayText.value;
let errors=[];
if(!text.includes("."))errors.push("Add punctuation.");
if(text.split(" ").length<30)errors.push("Too short.");
essayFeedback.innerHTML=errors.length?("Mistakes:<br>"+errors.join("<br>")):"Good essay!";
}

function toggleDark(){document.body.classList.toggle('dark')}
</script>
</body>
</html>
