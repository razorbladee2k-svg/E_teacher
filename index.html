<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>eTeacher ‚Äì Learn English with Us</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#2563eb;
  --card:#ffffff;
  --text:#111827;
  --btn:#4f46e5;
}
.dark{
  --bg:#020617;
  --card:#0f172a;
  --text:#e5e7eb;
  --btn:#6366f1;
}
*{box-sizing:border-box;font-family:system-ui}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
}
header{
  display:flex;
  justify-content:space-between;
  padding:18px;
  color:white;
}
button{
  width:100%;
  padding:14px;
  margin:8px 0;
  border:none;
  border-radius:12px;
  background:var(--btn);
  color:white;
  font-size:16px;
  cursor:pointer;
}
.outline{
  background:none;
  border:2px solid var(--btn);
  color:var(--btn);
}
.card{
  background:var(--card);
  max-width:420px;
  margin:40px auto;
  padding:25px;
  border-radius:18px;
}
.hidden{display:none}
.rule{
  background:#eef2ff;
  padding:12px;
  border-radius:10px;
  margin:12px 0;
}
.dark .rule{background:#1e293b}
</style>
</head>

<body>
<header>
  <strong>eTeacher</strong>
  <button onclick="toggleDark()">üåô</button>
</header>

<!-- LOGIN -->
<div class="card" id="login">
  <h2>Login</h2>
  <input id="user" placeholder="Username">
  <input id="pass" type="password" placeholder="Password">
  <button onclick="login()">Continue</button>
</div>

<!-- READY -->
<div class="card hidden" id="ready">
  <h2>Ready for a test?</h2>
  <p>This test checks your real grammar level.</p>
  <button onclick="startTest()">Start test</button>
</div>

<!-- TEST -->
<div class="card hidden" id="test">
  <h3 id="testQ"></h3>
  <div id="testA"></div>
</div>

<!-- DASHBOARD -->
<div class="card hidden" id="dash">
  <h2 id="welcome"></h2>
  <button onclick="openGrammar()">Grammar</button>
  <button onclick="openPractice()">Practice</button>
  <button onclick="window.open('https://www.youtube.com/@4000EssentialEnglishWords','_blank')">
    üì∫ Need vocabulary?
  </button>
</div>

<!-- GRAMMAR -->
<div class="card hidden" id="grammar">
  <h3>Grammar</h3>
  <div id="grammarBox"></div>
  <button class="outline" onclick="show('dash')">Back</button>
</div>

<!-- PRACTICE -->
<div class="card hidden" id="practice">
  <h3 id="pQ"></h3>
  <div id="pOptions"></div>
  <p id="pFeedback"></p>
  <button onclick="nextPractice()">Next</button>
  <button class="outline" onclick="show('dash')">Back</button>
</div>

<script>
/* ---------- BASIC NAV ---------- */
function show(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}
function toggleDark(){document.body.classList.toggle('dark')}

/* ---------- LOGIN ---------- */
function login(){
  if(!user.value||!pass.value) return;
  show('ready');
}

/* ---------- LEVEL TEST (LOGICAL) ---------- */
const testBank=[
{q:"If I ___ more time, I would study.",o:["have","had","will have"],c:1},
{q:"She has ___ her homework.",o:["do","did","done"],c:2},
{q:"The book ___ by him.",o:["wrote","was written","is writing"],c:1}
];
let ti=0,score=0,level="";

function startTest(){ti=0;score=0;loadTest();show('test')}
function loadTest(){
  if(ti>=testBank.length){
    level=score<=1?"A2":score==2?"B1":"B2";
    welcome.innerText=`Welcome (${level})`;
    show('dash');return;
  }
  testQ.innerText=testBank[ti].q;
  testA.innerHTML="";
  testBank[ti].o.forEach((x,i)=>{
    let b=document.createElement("button");
    b.innerText=x;
    b.onclick=()=>{if(i===testBank[ti].c)score++;ti++;loadTest()};
    testA.appendChild(b);
  });
}

/* ---------- GRAMMAR (STRUCTURED) ---------- */
function openGrammar(){
  grammarBox.innerHTML={
    A2:`
      <h4>Present Simple</h4>
      <div class="rule">Subject + Verb + Object</div>
      I eat apples.<br>She likes music.
    `,
    B1:`
      <h4>Present Perfect</h4>
      <div class="rule">Subject + have/has + Past Participle + Object</div>
      I have finished my homework.
    `,
    B2:`
      <h4>Second Conditional</h4>
      <div class="rule">If + Past Simple, would + Verb</div>
      If I were rich, I would travel.
    `
  }[level];
  show('grammar');
}

/* ---------- PRACTICE ENGINE (REAL) ---------- */
const practiceBank={
  B1:[
    {
      q:"She has ___ here for 5 years.",
      o:["live","lived","living"],
      c:1,
      e:"Use past participle in present perfect."
    },
    {
      q:"If I ___ you, I would study.",
      o:["am","was","were"],
      c:2,
      e:"Second conditional uses 'were'."
    }
  ]
};
let pi=0;

function openPractice(){pi=0;loadPractice();show('practice')}
function loadPractice(){
  const p=practiceBank[level][pi];
  pQ.innerText=p.q;
  pFeedback.innerText="";
  pOptions.innerHTML="";
  p.o.forEach((x,i)=>{
    let b=document.createElement("button");
    b.innerText=x;
    b.onclick=()=>{
      pFeedback.innerText=i===p.c
        ?"‚úÖ Correct"
        :`‚ùå Wrong. Correct: ${p.o[p.c]}. ${p.e}`;
    };
    pOptions.appendChild(b);
  });
}
function nextPractice(){
  pi=(pi+1)%practiceBank[level].length;
  loadPractice();
}
</script>
</body>
</html>
